{"version":3,"file":"0.chunk.js","sources":["webpack:///./src/app/pages/auth/auth.component.ts","webpack:///./src/app/pages/auth/auth.html","webpack:///./src/app/pages/auth/auth.module.ts","webpack:///./src/app/pages/auth/auth.routing.ts","webpack:///./src/app/pages/auth/auth.scss","webpack:///./src/app/pages/auth/auth.service.ts"],"sourcesContent":["\"use strict\";\nvar core_1 = require('@angular/core');\nvar router_1 = require('@angular/router');\nvar auth_service_1 = require('./auth.service');\nvar Auth = (function () {\n    function Auth(elem, _router, _authService) {\n        this.elem = elem;\n        this._router = _router;\n        this._authService = _authService;\n        this.editMode = false;\n        this.slogans = ['Done is better than perfect.', 'Code wins arguments.', 'Move fast and break things.'];\n        this.slogan = this.slogans[Math.floor(Math.random() * 3)];\n    }\n    Auth.prototype.toEditMode = function (event) {\n        this.editMode = !this.editMode;\n    };\n    Auth.prototype.quitEdit = function (event) {\n        this.editMode = false;\n    };\n    Auth.prototype.onEnter = function (event) {\n        this.editMode = false;\n        if (!!this.password) {\n            this.onSubmit();\n        }\n    };\n    Auth.prototype.onSubmit = function () {\n        var _this = this;\n        this._authService.getToken(this.password)\n            .then(function (auth) {\n            if (auth.result.token) {\n                localStorage.setItem('id_token', auth.result.token);\n                _this._router.navigate(['/dashboard']);\n            }\n        })\n            .catch(function (error) { });\n    };\n    Auth.prototype.ngAfterViewChecked = function () {\n        var input = this.elem.nativeElement.children[0].children[0].children[0].children[0];\n        input.focus();\n    };\n    Auth = __decorate([\n        core_1.Component({\n            selector: 'auth',\n            encapsulation: core_1.ViewEncapsulation.None,\n            styles: [require('./auth.scss')],\n            template: require('./auth.html')\n        }), \n        __metadata('design:paramtypes', [(typeof (_a = typeof core_1.ElementRef !== 'undefined' && core_1.ElementRef) === 'function' && _a) || Object, (typeof (_b = typeof router_1.Router !== 'undefined' && router_1.Router) === 'function' && _b) || Object, (typeof (_c = typeof auth_service_1.AuthService !== 'undefined' && auth_service_1.AuthService) === 'function' && _c) || Object])\n    ], Auth);\n    return Auth;\n    var _a, _b, _c;\n}());\nexports.Auth = Auth;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.component.ts\n// module id = ./src/app/pages/auth/auth.component.ts\n// module chunks = 0","module.exports = \"<div class=\\\"auth-main\\\">\\n  <div class=\\\"auth-block\\\">\\n    <div class=\\\"secret-titles\\\">\\n      <div class=\\\"title\\\" *ngIf=\\\"!editMode\\\" (dblclick)=\\\"toEditMode($event)\\\">\\n        <span>{{ slogan || '-----------' }}</span>\\n      </div>\\n      <input type=\\\"password\\\"\\n             class=\\\"input\\\"\\n             id=\\\"password\\\"\\n             autocomplete\\n             *ngIf=\\\"editMode\\\"\\n             [(ngModel)]=\\\"password\\\"\\n             (keyup.esc)=\\\"quitEdit($event)\\\"\\n             (keyup.enter)=\\\"onEnter($event)\\\"\\n             (dblclick)=\\\"toEditMode($event)\\\">\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.html\n// module id = ./src/app/pages/auth/auth.html\n// module chunks = 0","\"use strict\";\nvar core_1 = require('@angular/core');\nvar common_1 = require('@angular/common');\nvar forms_1 = require('@angular/forms');\nvar nga_module_1 = require('../../theme/nga.module');\nvar auth_routing_1 = require('./auth.routing');\nvar auth_service_1 = require('./auth.service');\nvar auth_component_1 = require('./auth.component');\nvar AuthModule = (function () {\n    function AuthModule() {\n    }\n    AuthModule = __decorate([\n        core_1.NgModule({\n            imports: [\n                common_1.CommonModule,\n                forms_1.FormsModule,\n                forms_1.ReactiveFormsModule,\n                nga_module_1.NgaModule,\n                auth_routing_1.routing\n            ],\n            providers: [\n                auth_service_1.AuthService\n            ],\n            declarations: [\n                auth_component_1.Auth\n            ]\n        }), \n        __metadata('design:paramtypes', [])\n    ], AuthModule);\n    return AuthModule;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = AuthModule;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.module.ts\n// module id = ./src/app/pages/auth/auth.module.ts\n// module chunks = 0","\"use strict\";\nvar router_1 = require('@angular/router');\nvar auth_component_1 = require('./auth.component');\nvar routes = [\n    { path: '', data: { name: 'auth' }, component: auth_component_1.Auth }\n];\nexports.routing = router_1.RouterModule.forChild(routes);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.routing.ts\n// module id = ./src/app/pages/auth/auth.routing.ts\n// module chunks = 0","module.exports = \".auth-main {\\n  display: flex;\\n  align-items: center;\\n  height: 100%;\\n  width: 100%;\\n  position: absolute; }\\n\\n.auth-block {\\n  width: 540px;\\n  margin: 0 auto;\\n  border-radius: 5px;\\n  background: rgba(0, 0, 0, 0.55);\\n  color: #fff;\\n  padding: 32px; }\\n  .auth-block h1 {\\n    font-weight: 300;\\n    margin-bottom: 28px;\\n    text-align: center; }\\n  .auth-block p {\\n    font-size: 16px; }\\n  .auth-block a {\\n    text-decoration: none;\\n    outline: none;\\n    transition: all 0.2s ease;\\n    color: #017170; }\\n    .auth-block a:hover {\\n      color: #01605f; }\\n  .auth-block .control-label {\\n    padding-top: 11px;\\n    color: #ffffff; }\\n  .auth-block .form-group {\\n    margin-bottom: 12px; }\\n  .auth-block > .secret-titles > .title,\\n  .auth-block > .secret-titles > .input {\\n    text-align: center;\\n    display: block;\\n    margin: 0;\\n    padding: 0;\\n    width: 100%;\\n    border: none;\\n    background: none;\\n    font-size: 32px;\\n    height: 35px;\\n    line-height: 35px;\\n    color: #fff; }\\n\\n.auth-input {\\n  width: 300px;\\n  margin-bottom: 24px; }\\n  .auth-input input {\\n    display: block;\\n    width: 100%;\\n    border: none;\\n    font-size: 16px;\\n    padding: 4px 10px;\\n    outline: none; }\\n\\na.forgot-pass {\\n  display: block;\\n  text-align: right;\\n  margin-bottom: -20px;\\n  float: right;\\n  z-index: 2;\\n  position: relative; }\\n\\n.auth-link {\\n  display: block;\\n  font-size: 16px;\\n  text-align: center;\\n  margin-bottom: 33px; }\\n\\n.auth-sep {\\n  margin-top: 36px;\\n  margin-bottom: 24px;\\n  line-height: 20px;\\n  font-size: 16px;\\n  text-align: center;\\n  display: block;\\n  position: relative; }\\n  .auth-sep > span {\\n    display: table-cell;\\n    width: 30%;\\n    white-space: nowrap;\\n    padding: 0 24px;\\n    color: #ffffff; }\\n    .auth-sep > span > span {\\n      margin-top: -12px;\\n      display: block; }\\n  .auth-sep:before, .auth-sep:after {\\n    border-top: solid 1px #ffffff;\\n    content: \\\"\\\";\\n    height: 1px;\\n    width: 35%;\\n    display: table-cell; }\\n\\n.al-share-auth {\\n  text-align: center; }\\n  .al-share-auth .al-share {\\n    float: none;\\n    margin: 0;\\n    padding: 0;\\n    display: inline-block; }\\n    .al-share-auth .al-share li {\\n      margin-left: 24px; }\\n      .al-share-auth .al-share li:first-child {\\n        margin-left: 0; }\\n      .al-share-auth .al-share li i {\\n        font-size: 24px; }\\n\\n.btn-auth {\\n  color: #ffffff !important; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.scss\n// module id = ./src/app/pages/auth/auth.scss\n// module chunks = 0","\"use strict\";\nvar core_1 = require('@angular/core');\nvar http_1 = require('@angular/http');\nvar angular2_jwt_1 = require('angular2-jwt');\nvar angular2_notifications_1 = require('angular2-notifications');\nrequire('rxjs/add/operator/toPromise');\nvar config_1 = require('src/config');\nvar AuthService = (function () {\n    function AuthService(http, _notificationsService) {\n        var _this = this;\n        this.http = http;\n        this._notificationsService = _notificationsService;\n        this._authUrl = config_1.API_ROOT + \"/auth\";\n        // 成功处理\n        this.handleResponse = function (response) {\n            var data = response.json();\n            if (data.code) {\n                _this._notificationsService.success(data.message, '数据请求成功', { timeOut: 1000 });\n                return Promise.resolve(data);\n            }\n            else {\n                _this._notificationsService.error(data.message, data.debug ? data.debug.message : data.message, { timeOut: 1000 });\n                return Promise.reject(data);\n            }\n        };\n        // 失败处理\n        this.handleError = function (error) {\n            var errmsg = [500, 504].indexOf(error.status) > -1 ? error._body : JSON.parse(error._body).message;\n            _this._notificationsService.error('请求失败', errmsg, { timeOut: 1000 });\n            return Promise.reject(error);\n        };\n    }\n    AuthService.prototype.getToken = function (password) {\n        return this.http\n            .post(this._authUrl, { password: password })\n            .toPromise()\n            .then(this.handleResponse)\n            .catch(this.handleError);\n    };\n    AuthService.prototype.loggedIn = function () {\n        return angular2_jwt_1.tokenNotExpired();\n    };\n    AuthService = __decorate([\n        core_1.Injectable(), \n        __metadata('design:paramtypes', [(typeof (_a = typeof http_1.Http !== 'undefined' && http_1.Http) === 'function' && _a) || Object, (typeof (_b = typeof angular2_notifications_1.NotificationsService !== 'undefined' && angular2_notifications_1.NotificationsService) === 'function' && _b) || Object])\n    ], AuthService);\n    return AuthService;\n    var _a, _b;\n}());\nexports.AuthService = AuthService;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/auth/auth.service.ts\n// module id = ./src/app/pages/auth/auth.service.ts\n// module chunks = 0"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpDA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;","sourceRoot":""}