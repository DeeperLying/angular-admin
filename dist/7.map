{"version":3,"file":"7.chunk.js","sources":["webpack:///./src/app/pages/options/options.component.ts","webpack:///./src/app/pages/options/options.html","webpack:///./src/app/pages/options/options.module.ts","webpack:///./src/app/pages/options/options.routing.ts","webpack:///./src/app/pages/options/options.scss"],"sourcesContent":["\"use strict\";\nvar core_1 = require('@angular/core');\nvar forms_1 = require('@angular/forms');\nvar options_service_1 = require('./options.service');\nvar Options = (function () {\n    function Options(_fb, _optionsService) {\n        var _this = this;\n        this._fb = _fb;\n        this._optionsService = _optionsService;\n        // 解析返回的权限表单数据\n        this.handleAuthChange = function (userAuthPromise) {\n            userAuthPromise.then(function (_a) {\n                var _b = _a.result, name = _b.name, slogan = _b.slogan, gravatar = _b.gravatar;\n                _this.authForm.reset({\n                    name: name,\n                    slogan: slogan,\n                    gravatar: gravatar,\n                    password: '',\n                    new_password: '',\n                    rel_new_password: ''\n                });\n            })\n                .catch(function (error) { });\n        };\n        // 解析返回的设置表单数据\n        this.handleOptionChange = function (optionPromise) {\n            optionPromise.then(function (_a) {\n                var options = _a.result;\n                options.ping_sites = options.ping_sites.toString().replace(/,/g, '\\n');\n                _this.optionForm.reset(options);\n            })\n                .catch(function (error) { });\n        };\n        // authForm\n        this.authForm = _fb.group({\n            'name': ['', forms_1.Validators.compose([forms_1.Validators.required])],\n            'slogan': ['', forms_1.Validators.compose([forms_1.Validators.required])],\n            'gravatar': ['', forms_1.Validators.compose([forms_1.Validators.required])],\n            'password': [''],\n            'new_password': [''],\n            'rel_new_password': [''],\n        });\n        this.name = this.authForm.controls['name'];\n        this.slogan = this.authForm.controls['slogan'];\n        this.gravatar = this.authForm.controls['gravatar'];\n        this.password = this.authForm.controls['password'];\n        this.new_password = this.authForm.controls['new_password'];\n        this.rel_new_password = this.authForm.controls['rel_new_password'];\n        // optionForm\n        this.optionForm = _fb.group({\n            '_id': [null],\n            'title': [''],\n            'sub_title': [''],\n            'keywords': [[]],\n            'description': [''],\n            'site_url': [''],\n            'site_email': ['', forms_1.Validators.compose([forms_1.Validators.pattern('([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+')])],\n            'site_icp': [''],\n            'ping_sites': [[]]\n        });\n        this._id = this.optionForm.controls['_id'];\n        this.title = this.optionForm.controls['title'];\n        this.sub_title = this.optionForm.controls['sub_title'];\n        this.keywords = this.optionForm.controls['keywords'];\n        this.description = this.optionForm.controls['description'];\n        this.site_url = this.optionForm.controls['site_url'];\n        this.site_email = this.optionForm.controls['site_email'];\n        this.site_icp = this.optionForm.controls['site_icp'];\n        this.ping_sites = this.optionForm.controls['ping_sites'];\n    }\n    // ping地址解析处理\n    Options.prototype.pingSitesChangeHandle = function (event) {\n        var newPingSites = event.target.value.replace(/\\s+/g, ' ').replace(/\\s/g, '\\n');\n        this.ping_sites.setValue(newPingSites);\n    };\n    // 关键词计息处理\n    Options.prototype.keywordsChangeHandle = function (event) {\n        var newWords = event.target.value.replace(/\\s/g, '').split(',');\n        this.keywords.setValue(newWords);\n    };\n    // 提交权限表单\n    Options.prototype.submitAuthForm = function (values) {\n        if (this.authForm.valid) {\n            this.putAuth(this.authForm.value);\n        }\n    };\n    // 提交设置表单\n    Options.prototype.submitOptionForm = function (values) {\n        if (this.optionForm.valid) {\n            this.ping_sites.setValue(new String(this.ping_sites.value).split('\\n'));\n            this.putOptions(this.optionForm.value);\n        }\n    };\n    // 获取用户\n    Options.prototype.getUserAuth = function () {\n        this.handleAuthChange(this._optionsService.getUserAuth());\n    };\n    // 更新用户\n    Options.prototype.putAuth = function (auth) {\n        this.handleAuthChange(this._optionsService.putAuth(auth));\n    };\n    // 获取配置\n    Options.prototype.getOptions = function () {\n        this.handleOptionChange(this._optionsService.getOptions());\n    };\n    // 更新配置\n    Options.prototype.putOptions = function (options) {\n        this.handleOptionChange(this._optionsService.putOptions(options));\n    };\n    Options.prototype.ngOnInit = function () {\n        this.getOptions();\n        this.getUserAuth();\n    };\n    Options = __decorate([\n        core_1.Component({\n            selector: 'options',\n            encapsulation: core_1.ViewEncapsulation.Emulated,\n            styles: [require('./options.scss')],\n            template: require('./options.html'),\n        }), \n        __metadata('design:paramtypes', [(typeof (_a = typeof forms_1.FormBuilder !== 'undefined' && forms_1.FormBuilder) === 'function' && _a) || Object, (typeof (_b = typeof options_service_1.OptionsService !== 'undefined' && options_service_1.OptionsService) === 'function' && _b) || Object])\n    ], Options);\n    return Options;\n    var _a, _b;\n}());\nexports.Options = Options;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/options/options.component.ts\n// module id = ./src/app/pages/options/options.component.ts\n// module chunks = 7","module.exports = \"<div class=\\\"row\\\">\\n  <div class=\\\"col-md-6 col-xs-6\\\">\\n    <ba-card title=\\\"基本设置\\\" baCardClass=\\\"with-scroll\\\">\\n      <div class=\\\"col-sm-12 col-xs-12\\\">\\n        <form class=\\\"form-horizontal option-form\\\"\\n              [formGroup]=\\\"optionForm\\\" \\n              (ngSubmit)=\\\"submitOptionForm(optionForm.value)\\\">\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!title.valid && title.touched), \\n                  'has-success': (title.valid && title.touched)\\n                }\\\">\\n            <label for=\\\"blogTitle\\\" class=\\\"col-sm-2 form-control-label\\\">站点标题</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"blogTitle\\\" \\n                     placeholder=\\\"站点标题\\\"\\n                     [formControl]=\\\"title\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!sub_title.valid && sub_title.touched), \\n                  'has-success': (sub_title.valid && sub_title.touched)\\n                }\\\">\\n            <label for=\\\"blogSubTitle\\\" class=\\\"col-sm-2 form-control-label\\\">副标题</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"blogSubTitle\\\" \\n                     placeholder=\\\"副标题\\\"\\n                     [formControl]=\\\"sub_title\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!keywords.valid && keywords.touched), \\n                  'has-success': (keywords.valid && keywords.touched)\\n                }\\\">\\n            <label for=\\\"blogKeywords\\\" class=\\\"col-sm-2 form-control-label\\\">关键词</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"blogKeywords\\\" \\n                     placeholder=\\\"关键词\\\"\\n                     [formControl]=\\\"keywords\\\"\\n                     (change)=\\\"keywordsChangeHandle($event)\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!description.valid && description.touched), \\n                  'has-success': (description.valid && description.touched)\\n                }\\\">\\n            <label for=\\\"blogDescription\\\" class=\\\"col-sm-2 form-control-label\\\">描述</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <textarea type=\\\"text\\\" \\n                        class=\\\"form-control blog-description\\\" \\n                        id=\\\"blogDescription\\\" \\n                        placeholder=\\\"描述\\\"\\n                        [formControl]=\\\"description\\\">\\n              </textarea>\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!site_url.valid && site_url.touched), \\n                  'has-success': (site_url.valid && site_url.touched)\\n                }\\\">\\n            <label for=\\\"siteUrl\\\" class=\\\"col-sm-2 form-control-label\\\">站点地址</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"siteUrl\\\" \\n                     placeholder=\\\"站点地址（URL）\\\"\\n                     [formControl]=\\\"site_url\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!site_email.valid && site_email.touched), \\n                  'has-success': (site_email.valid && site_email.touched)\\n                }\\\">\\n            <label for=\\\"siteEmail\\\" class=\\\"col-sm-2 form-control-label\\\">电子邮件地址</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"siteEmail\\\" \\n                     placeholder=\\\"博客邮件地址\\\"\\n                     [formControl]=\\\"site_email\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!site_icp.valid && site_icp.touched), \\n                  'has-success': (site_icp.valid && site_icp.touched)\\n                }\\\">\\n            <label for=\\\"icpID\\\" class=\\\"col-sm-2 form-control-label\\\">ICP备案号</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"icpID\\\" \\n                     placeholder=\\\"如：陕ICP备0000000号\\\"\\n                     [formControl]=\\\"site_icp\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!ping_sites.valid && ping_sites.touched), \\n                  'has-success': (ping_sites.valid && ping_sites.touched)\\n                }\\\">\\n            <label for=\\\"pingSites\\\" class=\\\"col-sm-2 form-control-label\\\">SEO更新服务</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <textarea id=\\\"pingSites\\\"\\n                        class=\\\"form-control blog-ping-sites\\\"\\n                        placeholder=\\\"在发表新文章时，NodePress会自动通知站点更新服务。用换行分隔多个服务URL。\\\"\\n                        [formControl]=\\\"ping_sites\\\"\\n                        (change)=\\\"pingSitesChangeHandle($event)\\\">\\n              </textarea>\\n            </div>\\n          </div>\\n          <hr>\\n          <div class=\\\"form-group row\\\">\\n            <div class=\\\"offset-sm-2 col-sm-10\\\">\\n              <button type=\\\"submit\\\" \\n                      class=\\\"btn btn-default\\\"\\n                      [disabled]=\\\"!optionForm.valid\\\">保存修改</button>\\n            </div>\\n          </div>\\n        </form>\\n      </div>\\n    </ba-card>\\n  </div>\\n  <div class=\\\"col-md-6 col-xs-6\\\">\\n    <ba-card title=\\\"个人设置\\\" baCardClass=\\\"with-scroll\\\">\\n      <div class=\\\"col-sm-12 col-xs-12\\\">\\n        <form class=\\\"form-horizontal auth-form\\\"\\n              [formGroup]=\\\"authForm\\\" \\n              (ngSubmit)=\\\"submitAuthForm(authForm.value)\\\">\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!gravatar.valid && gravatar.touched), \\n                  'has-success': (gravatar.valid && gravatar.touched)\\n                }\\\">\\n            <label class=\\\"col-sm-2 form-control-label\\\">个人头像</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <ba-picture-uploader class=\\\"form-control auth-gravatar\\\" [formControl]=\\\"gravatar\\\">\\n              </ba-picture-uploader>\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!name.valid && name.touched), \\n                  'has-success': (name.valid && name.touched)\\n                }\\\">\\n            <label for=\\\"userName\\\" class=\\\"col-sm-2 form-control-label\\\">姓名</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"userName\\\"\\n                     placeholder=\\\"个人名字\\\"\\n                     [formControl]=\\\"name\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!slogan.valid && slogan.touched), \\n                  'has-success': (slogan.valid && slogan.touched)\\n                }\\\">\\n            <label for=\\\"userSlogan\\\" class=\\\"col-sm-2 form-control-label\\\">个人签名</label>\\n            <div class=\\\"col-sm-10\\\">\\n              <input type=\\\"text\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"userSlogan\\\" \\n                     placeholder=\\\"个人签名\\\"\\n                     [formControl]=\\\"slogan\\\">\\n            </div>\\n          </div>\\n          <hr>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!password.valid && password.touched), \\n                  'has-success': (password.valid && password.touched)\\n                }\\\">\\n            <label for=\\\"userPassword\\\" class=\\\"col-sm-2 form-control-label\\\">旧密码</label>\\n            <div class=\\\"col-sm-6\\\">\\n              <input type=\\\"password\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"userPassword\\\" \\n                     placeholder=\\\"输入旧密码\\\"\\n                     [formControl]=\\\"password\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!new_password.valid && new_password.touched), \\n                  'has-success': (new_password.valid && new_password.touched)\\n                }\\\">\\n            <label for=\\\"userNewPassword\\\" class=\\\"col-sm-2 form-control-label\\\">新密码</label>\\n            <div class=\\\"col-sm-6\\\">\\n              <input type=\\\"password\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"userNewPassword\\\" \\n                     placeholder=\\\"输入新密码\\\"\\n                     [formControl]=\\\"new_password\\\">\\n            </div>\\n          </div>\\n          <div class=\\\"form-group row\\\"\\n                [ngClass]=\\\"{ \\n                  'has-error': (!rel_new_password.valid && rel_new_password.touched), \\n                  'has-success': (rel_new_password.valid && rel_new_password.touched)\\n                }\\\">\\n            <label for=\\\"userRelNewPassword\\\" class=\\\"col-sm-2 form-control-label\\\">确认新密码</label>\\n            <div class=\\\"col-sm-6\\\">\\n              <input type=\\\"password\\\" \\n                     class=\\\"form-control\\\" \\n                     id=\\\"userRelNewPassword\\\" \\n                     placeholder=\\\"确认新密码\\\"\\n                     [formControl]=\\\"rel_new_password\\\">\\n            </div>\\n          </div>\\n          <hr>\\n          <div class=\\\"form-group row\\\">\\n            <div class=\\\"offset-sm-2 col-sm-10\\\">\\n              <button type=\\\"submit\\\" \\n                      class=\\\"btn btn-default\\\"\\n                      [disabled]=\\\"!authForm.valid\\\">保存修改</button>\\n            </div>\\n          </div>\\n        </form>\\n      </div>\\n    </ba-card>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/options/options.html\n// module id = ./src/app/pages/options/options.html\n// module chunks = 7","\"use strict\";\nvar core_1 = require('@angular/core');\nvar common_1 = require('@angular/common');\nvar nga_module_1 = require('../../theme/nga.module');\nvar forms_1 = require('@angular/forms');\nvar options_component_1 = require('./options.component');\nvar options_routing_1 = require('./options.routing');\nvar options_service_1 = require('./options.service');\nvar OptionsModule = (function () {\n    function OptionsModule() {\n    }\n    OptionsModule = __decorate([\n        core_1.NgModule({\n            imports: [\n                common_1.CommonModule,\n                forms_1.FormsModule,\n                forms_1.ReactiveFormsModule,\n                nga_module_1.NgaModule,\n                options_routing_1.routing\n            ],\n            providers: [\n                options_service_1.OptionsService\n            ],\n            declarations: [\n                options_component_1.Options\n            ]\n        }), \n        __metadata('design:paramtypes', [])\n    ], OptionsModule);\n    return OptionsModule;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = OptionsModule;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/options/options.module.ts\n// module id = ./src/app/pages/options/options.module.ts\n// module chunks = 7","\"use strict\";\nvar router_1 = require('@angular/router');\nvar options_component_1 = require('./options.component');\nvar routes = [\n    { path: '', component: options_component_1.Options }\n];\nexports.routing = router_1.RouterModule.forChild(routes);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/options/options.routing.ts\n// module id = ./src/app/pages/options/options.routing.ts\n// module chunks = 7","module.exports = \".option-form .blog-description,\\n.option-form .blog-ping-sites {\\n  height: 10em;\\n  line-height: 1.8em; }\\n\\n.auth-form .auth-gravatar {\\n  padding: 0;\\n  display: inline-block;\\n  width: 200px;\\n  height: 200px; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/options/options.scss\n// module id = ./src/app/pages/options/options.scss\n// module chunks = 7"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC7HA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;;;;","sourceRoot":""}